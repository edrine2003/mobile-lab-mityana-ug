<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mobile Lab Order</title>
  
  <!-- âœ… EmailJS v4 -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script type="text/javascript">
    (function() {
      emailjs.init({
        publicKey: "QPXYuZG5LIiv_1x3H" // ğŸ”‘ your EmailJS Public Key
      });
    })();
  </script>
</head>
<body>
  <h2>ğŸ§ª Mobile Lab Order Form</h2>

  <form id="orderForm">
    <label>Name:</label><br>
    <input type="text" id="name" required><br><br>

    <label>Phone:</label><br>
    <input type="tel" id="phone" required><br><br>

    <label>Tests (comma separated):</label><br>
    <input type="text" id="tests" required><br><br>

    <label>Location:</label><br>
    <input type="text" id="location" required><br><br>

    <label>Payment Method:</label><br>
    <select id="payment" required>
      <option value="Cash">Cash</option>
      <option value="Mobile Money">Mobile Money</option>
      <option value="Card">Card</option>
    </select><br><br>

    <label>Total (UGX):</label><br>
    <input type="number" id="total" required><br><br>

    <button type="submit">Submit Order</button>
  </form>

  <script>
    document.getElementById("orderForm").addEventListener("submit", function(e) {
      e.preventDefault();

      // âœ… Collect values
      const name = document.getElementById("name").value;
      const phone = document.getElementById("phone").value;
      const tests = document.getElementById("tests").value;
      const location = document.getElementById("location").value;
      const payment = document.getElementById("payment").value;
      const total = document.getElementById("total").value;

      // âœ… Auto-generate Order ID & Timestamp
      const orderID = "LAB-" + Date.now();
      const orderDate = new Date().toLocaleString();

      // âœ… Your EmailJS IDs
      const serviceID = "service_sjp4zrf";
      const templateID = "lab_order";

      // âœ… Send email
      emailjs.send(serviceID, templateID, {
        order_id: orderID,
        order_date: orderDate,
        name: name,
        phone: phone,
        tests: tests,
        location: location,
        payment: payment,
        total: `UGX ${total}`
      })
      .then(() => {
        alert("âœ… Order submitted successfully! We will contact you shortly.");
        document.getElementById("orderForm").reset();
      }, (err) => {
        alert("âŒ Failed to send order. Please try again.\n" + JSON.stringify(err));
      });
    });
  </script>
</body>
</html>
